
{% schema %}
{
  "name": "Zora",
  "target": "body",
  "settings": [
    {
      "type": "color",
      "id": "zora_bg_color",
      "label": "t:schema.zora.settings.zora_bg_color.label",
      "info": "t:schema.zora.settings.zora_bg_color.info",
      "default": "#6bb2deff"
    },
    {
      "type": "color",
      "id": "zora_success_color",
      "label": "t:schema.zora.settings.zora_success_color.label",
      "info": "t:schema.zora.settings.zora_success_color.info",
      "default": "#6fde6bff"
    },
    {
      "type": "color",
      "id": "zora_info_color",
      "label": "t:schema.zora.settings.zora_info_color.label",
      "info": "t:schema.zora.settings.zora_info_color.info",
      "default": "#eaeef1ff"
    },
    {
      "type": "color",
      "id": "zora_error_color",
      "label": "t:schema.zora.settings.zora_error_color.label",
      "info": "t:schema.zora.settings.zora_error_color.info",
      "default": "#e64048ff"
    },
    {
      "type": "color",
      "id": "zora_warning_color",
      "label": "t:schema.zora.settings.zora_warning_color.label",
      "info": "t:schema.zora.settings.zora_warning_color.info",
      "default": "#e9cb67ff"
    },
    {
      "type": "range",
      "id": "zora_size_position_x",
      "label": "t:schema.zora.settings.zora_size_position_x.label",
      "info": "t:schema.zora.settings.zora_size_position_x.info",
      "min": 0,
      "max": 5,
      "unit": "rem",
      "step": 1,
      "default": 1
    },
    {
      "type": "range",
      "id": "zora_size_position_y",
      "label": "t:schema.zora.settings.zora_size_position_y.label",
      "info": "t:schema.zora.settings.zora_size_position_y.info",
      "min": 0,
      "max": 50,
      "unit": "dvh",
      "step": 1,
      "default": 10
    }
  ]
}
{% endschema %}

{% style %}
:root{
  {% comment %}--zora-error-color: {{ block.settings.zora_error_color }};{% endcomment %}
  {% comment %}--zora-success-color: {{ block.settings.zora_success_color }};{% endcomment %}
  {% comment %}--zora-info-color: {{ block.settings.zora_info_color }};{% endcomment %}
  {% comment %}--zora-warning-color: {{ block.settings.zora_warning_color }};{% endcomment %}
  /* ğŸŒ· ä¸»è‰²è°ƒ */
  --zora-primary: #f8a5c2;       /* æŸ”å’Œæ°´èœœæ¡ƒç²‰ */
  --zora-primary-hover: #f78fb1;  /* ç¨æ·±çš„ç²‰è‰² */
  --zora-primary-light: #fce4ec;  /* ææµ…ç²‰è‰²èƒŒæ™¯ */
  --zora-primary-border: #fbcfe8; /* ç²‰è‰²è°ƒè¾¹æ¡† */

  /* ğŸƒ çŠ¶æ€è‰² - èå…¥èŠ±å‰ä¸»é¢˜ */
  --zora-error-color: #f28b82;    /* æ¸©æŸ”çŠç‘šçº¢ - ç±»ä¼¼èŠ±æœµä¸­çš„çº¢è‰² */
  --zora-success-color: #a5d6a7;  /* æ¸…æ–°è–„è·ç»¿ - å¶å­çš„é¢œè‰² */
  --zora-info-color: #90caf9;     /* å¤©ç©ºæ·¡è“è‰² - ä¿æŒä¸“ä¸šä½†æŸ”å’Œ */
  --zora-warning-color: #ffcc80;  /* æ¸©æš–é¦™æ§Ÿæ©™ - ç±»ä¼¼èŠ±æœµä¸­çš„æ©™è‰² */

  /* ğŸŒ¼ ä¸­æ€§è‰² - æ¸©æŸ”å¤§åœ°è‰²ç³» */
  --zora-text-primary: #5d4037;   /* æš–è¤è‰²æ–‡å­— - ä¸åˆºçœ¼ */
  --zora-text-secondary: #8d6e63; /* æµ…è¤è‰²æ¬¡è¦æ–‡å­— */
  --zora-background: #fef6f9;     /* ææµ…ç²‰ç™½è‰²èƒŒæ™¯ */
  --zora-surface: #ffffff;        /* çº¯ç™½è‰²å¡ç‰‡ */
  --zora-border: #f3d9e4;         /* ç²‰è°ƒè¾¹æ¡† */

  /* ğŸ’¬ èŠå¤©ç•Œé¢ä¸“ç”¨è‰² */
  --zora-chat-bubble-customer: #f8a5c2;   /* å®¢æˆ·æ¶ˆæ¯ç”¨ä¸»ç²‰è‰² */
  --zora-chat-bubble-agent: #f5f5f5;     /* å®¢æœæ¶ˆæ¯ç”¨æµ…ç° */
  --zora-chat-bubble-text-customer: #5d4037; /* æ·±è¤è‰²æ–‡å­— */
  --zora-chat-bubble-text-agent: #5d4037;

  /* ğŸŒ¸ ç½‘ç«™ç‰¹å®šå…ƒç´ è‰² */
  --zora-header-bg: #ffffff;       /* é¡¶éƒ¨å¯¼èˆªèƒŒæ™¯ */
  --zora-search-border: #f8a5c2;   /* æœç´¢æ¡†è¾¹æ¡† */
  --zora-button-bg: #f8a5c2;       /* æŒ‰é’®èƒŒæ™¯ */
  --zora-button-text: #ffffff;     /* æŒ‰é’®æ–‡å­— */
  --zora-badge-hot: #f28b82;       /* Hotæ ‡ç­¾èƒŒæ™¯ */
  --zora-badge-new: #a5d6a7;       /* Newæ ‡ç­¾èƒŒæ™¯ */
}
  div,input,button{
    box-sizing: border-box;
  }
  /* éšè—æ»šåŠ¨æ¡ */
  .hidden-scroller::-webkit-scrollbar {
  display: none;
  }

  /* ä¸»å®¹å™¨å®šä½ */
  .zora-main {
  position: fixed;
  width: fit-content;
  height: fit-content;
  left: 1.5rem;
  bottom: 1.5rem;
  z-index: 90;
  cursor: pointer;
  }

  /* é»˜è®¤ä¸»æŒ‰é’® */
  .zora-main-btn {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: .5rem 1rem;
  width: fit-content;
  height: fit-content;
  border-radius: 20px;
  background: linear-gradient(135deg, #f8a5c2, #f78fb1);
  box-shadow: 0 4px 12px rgba(248, 165, 194, 0.3);
  transition: all 0.3s ease;
  border: 2px solid #ffffff;
  }

  .zora-main-btn:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 20px rgba(248, 165, 194, 0.4);
  }

  .zora-main-btn:active {
  transform: scale(0.95);
  }

  /* æ¿€æ´»çŠ¶æ€ä¸»æŒ‰é’® */
  .zora-main-btn-active {
  display: flex;
  justify-content: center;
  align-items: center;
  width: fit-content;
  height: 3.5rem;
  border-radius: 20px;
  background: linear-gradient(135deg, #f8a5c2, #f78fb1);
  box-shadow: 0 4px 12px rgba(248, 165, 194, 0.3);
  border: 2px solid #ffffff;
  transition: all 0.3s ease;
  }

  /* æŒ‰é’®å›¾æ ‡ */
  .zora-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  color: var(--zora-surface);
  }

  /* èŠå¤©å›¾æ ‡ */
  .zora-chat-icon {
  color: var(--zora-surface);
  font-size: 1.8rem;
  }

  /* å…³é—­å›¾æ ‡ */
  .btn-close {
  color: var(--zora-surface);
  width: 1.8rem;
  height: 1.8rem;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  }

  /* æŒ‰é’®å®¹å™¨åˆ‡æ¢ */
  .zora-default-btn-box,
  .zora-active-btn-box {
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 1.5rem;
  }

  .zora-active-btn-box.btn-box-hidden,
  .zora-default-btn-box.btn-box-hidden {
  display: none;
  }

  /* å‘¼å¸åŠ¨ç”» */
  @keyframes breathing {
  0% {
  box-shadow: 0 4px 12px rgba(248, 165, 194, 0.3);
  }
  50% {
  box-shadow: 0 4px 20px rgba(248, 165, 194, 0.5);
  }
  100% {
  box-shadow: 0 4px 12px rgba(248, 165, 194, 0.3);
  }
  }

  /* æ–°æ¶ˆæ¯æç¤º */
  .zora-new-message-indicator {
  position: absolute;
  top: -4px;
  right: -4px;
  width: .8rem;
  height: .8rem;
  padding: .3rem;
  background: var(--zora-primary);
  border-radius: 50%;
  border: 2px solid var(--zora-surface);
  animation: pulse 2s infinite;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.65rem;
  color: #ffffff;
  font-weight: 600;
  min-width: 0.8rem;
  line-height: 1;
  }

  @keyframes pulse {
  0%, 100% {
  transform: scale(1);
  opacity: 1;
  }
  50% {
  transform: scale(1.2);
  opacity: 0.8;
  }
  }

  /* ç§»åŠ¨ç«¯é€‚é… */
  @media (max-width: 768px) {
  .zora-main{
    left: 1.2rem;
  }
  .zora-default-btn-box,.zora-btn{
     font-size: 1rem;
  }
  .zora-main-btn,
  .zora-main-btn-active {
    width: fit-content;
  }
  .zora-main-btn{
    padding: .3rem .8rem;
  }

  .zora-chat-icon {
  font-size: 1.5rem;
  }

  .btn-close {
  font-size: 1.2rem;
  width: 1.5rem;
  height: 1.5rem;
  }
  }
{% endstyle %}

<div class="zora-main" data-shop="{{ shop.domain }}" data-locale="{{ shop.locale }}">
  <zora-button class="zora-main-btn" data-target-class="zora-container" data-active-class="zora-container-active">
    <div class="zora-default-btn-box">
      <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em"><path d="M348 700.4c21.7 3.6 71.2 7.4 94.1 7.4 200.9 0 335.7-149.5 335.7-325.2 0-175.8-168.5-318.3-335.7-318.3C241 64.3 78.4 206.8 78.4 382.6c0 101.8 38.8 188.3 111.9 250.5v158.7L348 700.4z m246.9-355.7c23 0 41.6 18.6 41.6 41.6s-18.6 41.6-41.6 41.6-41.6-18.6-41.6-41.6 18.6-41.6 41.6-41.6z m-168.2 0c23 0 41.6 18.6 41.6 41.6s-18.6 41.6-41.6 41.6-41.6-18.6-41.6-41.6c0-11 4.4-21.6 12.2-29.4 7.8-7.8 18.4-12.2 29.4-12.2z m-166.7 0c23 0 41.6 18.6 41.6 41.6S283 427.9 260 427.9s-41.6-18.6-41.6-41.6c0.1-23 18.7-41.6 41.6-41.6z m0 0" fill="#ffffff"></path><path d="M832.3 319.9l1.4 24.1c0.2 22.9 0 20.8 0 42 0 223.1-175.8 377.7-419.7 377.7h-83.9c66.6 65.1 144.1 104.9 251.8 104.9 22.4-0.1 44.9-1.9 67-5.6l156.8 96.6V800.9c85-58.2 139.9-148.6 139.9-250.5 0-90.8-43.6-172.5-113.3-230.5z m0 0" fill="#ffffff"></path></svg>
      <button class="zora-btn">Zora</button>
      <!-- æœªè¯»æ¶ˆæ¯æŒ‡ç¤ºå™¨ -->
      <span class="zora-new-message-indicator hidden"></span>
    </div>
    <div class="zora-active-btn-box btn-box-hidden ">
      <button class="zora-btn btn-close">
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"  width="1em" height="1em"><path d="M512 421.490332 331.092592 240.582924C306.351217 215.841549 265.464551 215.477441 240.470996 240.470996 215.303191 265.638801 215.527553 306.037221 240.582924 331.092592L421.490332 512 240.582925 692.907407C215.84155 717.648782 215.477441 758.535449 240.470996 783.529004 265.638801 808.696809 306.037222 808.472446 331.092593 783.417075L512 602.509668 692.907407 783.417075C717.648782 808.15845 758.535449 808.522559 783.529004 783.529004 808.696809 758.361199 808.472446 717.962778 783.417075 692.907407L602.509668 512 783.417076 331.092592C808.158451 306.351217 808.522559 265.464551 783.529004 240.470996 758.361199 215.303191 717.962779 215.527553 692.907408 240.582924L512 421.490332Z" fill="#ffffff"></path></svg>
      </button>
    </div>
  </zora-button>
  {% render 'zora' %}
  {% render 'zora-toast' %}
  {% render 'zora-bubble',
    bubbleType: 'info',
    content: 'Zora chatbot',
    icon:'ğŸ¤–',
    show_close: true
  %}
  <script defer src="{{ 'socket.io-client.min.js' | asset_url }}"></script>
  <script defer src="{{ 'utils.js' | asset_url }}"></script>
  <script defer src="{{ 'renderMessage.js' | asset_url }}"></script>
  <script defer src="{{ 'websocket.js' | asset_url }}"></script>
  <script defer src="{{ 'zora.js' | asset_url }}"></script>
</div>
